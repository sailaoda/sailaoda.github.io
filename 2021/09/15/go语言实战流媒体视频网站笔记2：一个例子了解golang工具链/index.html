<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Go语言实战流媒体视频网站笔记2：一个例子了解Golang工具链 | 赛 の 任意门</title><meta name="keywords" content="Golang实战"><meta name="author" content="hackerwu"><meta name="copyright" content="hackerwu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="通过一个简单的webservice具体从Golang的工具链，到test，全面介绍Golang在工程项目里需要掌握的知识点。">
<meta property="og:type" content="article">
<meta property="og:title" content="Go语言实战流媒体视频网站笔记2：一个例子了解Golang工具链">
<meta property="og:url" content="http://hackerwu.cn/2021/09/15/go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E6%B5%81%E5%AA%92%E4%BD%93%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E7%AC%94%E8%AE%B02%EF%BC%9A%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90%E4%BA%86%E8%A7%A3golang%E5%B7%A5%E5%85%B7%E9%93%BE/index.html">
<meta property="og:site_name" content="赛 の 任意门">
<meta property="og:description" content="通过一个简单的webservice具体从Golang的工具链，到test，全面介绍Golang在工程项目里需要掌握的知识点。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://hackerwu.cn/img/cover/goliu.jpg">
<meta property="article:published_time" content="2021-09-15T02:47:16.000Z">
<meta property="article:modified_time" content="2021-09-19T02:28:58.000Z">
<meta property="article:author" content="hackerwu">
<meta property="article:tag" content="Golang实战">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://hackerwu.cn/img/cover/goliu.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/sailaoda/sai_img//img/3/1.jpg"><link rel="canonical" href="http://hackerwu.cn/2021/09/15/go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E6%B5%81%E5%AA%92%E4%BD%93%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E7%AC%94%E8%AE%B02%EF%BC%9A%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90%E4%BA%86%E8%A7%A3golang%E5%B7%A5%E5%85%B7%E9%93%BE/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="code-PSRFI2eFDy"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?https://hm.baidu.com/hm.js?15914aea3434d71351b25e4c9924c0a9";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-5EKRNM989R"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5EKRNM989R');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":30,"position":"top","messagePrev":"亲亲，现在距离上次更新已经过了","messageNext":"天，文章的内容现在可能有些出入了。"},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: hackerwu","link":"链接: ","source":"来源: 赛 の 任意门","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-right"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Go语言实战流媒体视频网站笔记2：一个例子了解Golang工具链',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-09-19 10:28:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/font.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.1.6/css/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiperstyle.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.min.css" media="defer" onload="this.media='all'"><script async src="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus@latest/lib/carousel-touch.min.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/sailaoda/sai_img//img/3/1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">72</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 微首页</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://book.hackerwu.cn"><i class="fa-fw iconfont icon-weifuwu-copy"></i><span> Golang剑指Offer</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-a-golangicon"></i><span> Golang</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Golang/Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E6%B5%81%E5%AA%92%E4%BD%93%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99/"><i class="fa-fw iconfont icon-liumeiti"></i><span> Go语言实战流媒体视频网站</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/Java/"><i class="fa-fw iconfont icon-suanfa1"></i><span> Java</span></a></div><div class="menus_item"><a class="site-page" href="/categories/learning/"><i class="fa-fw iconfont icon-fenbushicunchu1"></i><span> 深度学习</span></a></div><div class="menus_item"><a class="site-page" href="/categories/chain/"><i class="fa-fw iconfont icon-qukuailian2"></i><span> 区块链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/hacker/"><i class="fa-fw iconfont icon-heike1"></i><span> 网络安全</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-xueshujiangzuo"></i><span> 微后台</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/"><i class="fa-fw iconfont icon-kejichuangye"></i><span> 面试准备</span></a></li><li><a class="site-page child" href="/categories/Golang/Golang%E5%AD%A6%E4%B9%A0/"><i class="fa-fw iconfont icon-icon-golang"></i><span> Golang学习</span></a></li><li><a class="site-page child" href="/categories/%E6%80%9D%E8%80%83%E6%80%BB%E7%BB%93/Golang%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86/"><i class="fa-fw iconfont icon-heiban"></i><span> Golang面试题汇总</span></a></li><li><a class="site-page child" href="/categories/%E6%80%9D%E8%80%83%E6%80%BB%E7%BB%93/LeetCode%E5%88%B7%E9%A2%98%E5%89%91%E6%8C%87Offer/"><i class="fa-fw iconfont icon-suanfa6"></i><span> LeetCode刷题剑指Offer</span></a></li><li><a class="site-page child" href="/categories/Redis/"><i class="fa-fw iconfont icon-weifuwu-copy"></i><span> Redis</span></a></li><li><a class="site-page child" href="/categories/Nginx/"><i class="fa-fw iconfont icon-fuwuqi1"></i><span> Nginx</span></a></li><li><a class="site-page child" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%BC%80%E5%8F%91/"><i class="fa-fw iconfont icon-fenbushicunchu"></i><span> 中间件开发</span></a></li><li><a class="site-page child" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F-%E5%88%86%E5%B8%83%E5%BC%8F-%E5%BE%AE%E6%9C%8D%E5%8A%A1/"><i class="fa-fw iconfont icon-weifuwu"></i><span> 云原生-分布式-微服务</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-jishuzhuanyi"></i><span> 微八股</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"><i class="fa-fw iconfont icon-suanfa1"></i><span> 汇编语言</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"><i class="fa-fw iconfont icon-suanfa2"></i><span> 数据结构与算法</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><i class="fa-fw iconfont icon-icon-test"></i><span> 计算机网络</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><i class="fa-fw iconfont icon-rongqihuatiaodu"></i><span> 操作系统</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90/"><i class="fa-fw iconfont icon-1111-19"></i><span> 计算机组成</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/MySQL/"><i class="fa-fw iconfont icon-rongqihua"></i><span> MySQL</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-tongzhigonggao"></i><span> 微分类</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fas fa-comments"></i><span> 碎碎念</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-xuesheng"></i><span> 我</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw iconfont icon-wode"></i><span> 关于我</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 微相册</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw iconfont icon-youqinglianjie"></i><span> 网站</span></a></li><li><a class="site-page child" href="/messageboard/"><i class="fa-fw fas fa-paper-plane"></i><span> 留言板</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">赛 の 任意门</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 微首页</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://book.hackerwu.cn"><i class="fa-fw iconfont icon-weifuwu-copy"></i><span> Golang剑指Offer</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-a-golangicon"></i><span> Golang</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Golang/Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E6%B5%81%E5%AA%92%E4%BD%93%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99/"><i class="fa-fw iconfont icon-liumeiti"></i><span> Go语言实战流媒体视频网站</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/Java/"><i class="fa-fw iconfont icon-suanfa1"></i><span> Java</span></a></div><div class="menus_item"><a class="site-page" href="/categories/learning/"><i class="fa-fw iconfont icon-fenbushicunchu1"></i><span> 深度学习</span></a></div><div class="menus_item"><a class="site-page" href="/categories/chain/"><i class="fa-fw iconfont icon-qukuailian2"></i><span> 区块链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/hacker/"><i class="fa-fw iconfont icon-heike1"></i><span> 网络安全</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-xueshujiangzuo"></i><span> 微后台</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/"><i class="fa-fw iconfont icon-kejichuangye"></i><span> 面试准备</span></a></li><li><a class="site-page child" href="/categories/Golang/Golang%E5%AD%A6%E4%B9%A0/"><i class="fa-fw iconfont icon-icon-golang"></i><span> Golang学习</span></a></li><li><a class="site-page child" href="/categories/%E6%80%9D%E8%80%83%E6%80%BB%E7%BB%93/Golang%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86/"><i class="fa-fw iconfont icon-heiban"></i><span> Golang面试题汇总</span></a></li><li><a class="site-page child" href="/categories/%E6%80%9D%E8%80%83%E6%80%BB%E7%BB%93/LeetCode%E5%88%B7%E9%A2%98%E5%89%91%E6%8C%87Offer/"><i class="fa-fw iconfont icon-suanfa6"></i><span> LeetCode刷题剑指Offer</span></a></li><li><a class="site-page child" href="/categories/Redis/"><i class="fa-fw iconfont icon-weifuwu-copy"></i><span> Redis</span></a></li><li><a class="site-page child" href="/categories/Nginx/"><i class="fa-fw iconfont icon-fuwuqi1"></i><span> Nginx</span></a></li><li><a class="site-page child" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%BC%80%E5%8F%91/"><i class="fa-fw iconfont icon-fenbushicunchu"></i><span> 中间件开发</span></a></li><li><a class="site-page child" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F-%E5%88%86%E5%B8%83%E5%BC%8F-%E5%BE%AE%E6%9C%8D%E5%8A%A1/"><i class="fa-fw iconfont icon-weifuwu"></i><span> 云原生-分布式-微服务</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-jishuzhuanyi"></i><span> 微八股</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"><i class="fa-fw iconfont icon-suanfa1"></i><span> 汇编语言</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"><i class="fa-fw iconfont icon-suanfa2"></i><span> 数据结构与算法</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><i class="fa-fw iconfont icon-icon-test"></i><span> 计算机网络</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><i class="fa-fw iconfont icon-rongqihuatiaodu"></i><span> 操作系统</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90/"><i class="fa-fw iconfont icon-1111-19"></i><span> 计算机组成</span></a></li><li><a class="site-page child" href="/categories/%E5%85%AB%E8%82%A1/MySQL/"><i class="fa-fw iconfont icon-rongqihua"></i><span> MySQL</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-tongzhigonggao"></i><span> 微分类</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fas fa-comments"></i><span> 碎碎念</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-xuesheng"></i><span> 我</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw iconfont icon-wode"></i><span> 关于我</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 微相册</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw iconfont icon-youqinglianjie"></i><span> 网站</span></a></li><li><a class="site-page child" href="/messageboard/"><i class="fa-fw fas fa-paper-plane"></i><span> 留言板</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Go语言实战流媒体视频网站笔记2：一个例子了解Golang工具链</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-09-15T02:47:16.000Z" title="发表于 2021-09-15 10:47:16">2021-09-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-09-19T02:28:58.000Z" title="更新于 2021-09-19 10:28:58">2021-09-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Golang/">Golang</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Golang/Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E6%B5%81%E5%AA%92%E4%BD%93%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99/">Go语言实战流媒体视频网站</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>7分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Go语言实战流媒体视频网站笔记2：一个例子了解Golang工具链"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="一个Go的例子"><a href="#一个Go的例子" class="headerlink" title="一个Go的例子"></a>一个Go的例子</h1><div class="note simple info flat"><p>通过一个简单的webservice具体从golang的工具链，到test，全面介绍golang在工程项目里需要掌握的知识点。 </p>
</div>
<h2 id="Go工具-命令"><a href="#Go工具-命令" class="headerlink" title="Go工具/命令"></a>Go工具/命令</h2><h3 id="Usage："><a href="#Usage：" class="headerlink" title="Usage："></a>Usage：</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">go</span> <span class="token operator">&lt;</span>command<span class="token operator">></span> <span class="token punctuation">[</span>arguments<span class="token punctuation">]</span></code></pre>
<h3 id="The-commands-are"><a href="#The-commands-are" class="headerlink" title="The commands are:"></a>The commands are:</h3><pre class="language-go" data-language="go"><code class="language-go">bug         start a bug report
build       compile packages and dependencies
clean       remove object files and cached files
doc         show documentation <span class="token keyword">for</span> <span class="token keyword">package</span> or symbol
env         <span class="token builtin">print</span> Go environment information
fix         update packages to use <span class="token builtin">new</span> APIs
fmt         gofmt <span class="token punctuation">(</span>reformat<span class="token punctuation">)</span> <span class="token keyword">package</span> sources
generate    generate Go files by processing source
get         add dependencies to current module and install them
install     compile and install packages and dependencies
list        list packages or modules
mod         module maintenance
run         compile and run Go program
test        test packages
tool        run specified <span class="token keyword">go</span> tool
version     <span class="token builtin">print</span> Go version
vet         report likely mistakes in packages</code></pre>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">go</span> build       compile packages and dependencies</code></pre>
<ul>
<li>最常用的go command之一，编译go文件。</li>
<li>跨平台编译：<code>env GOOS=linux GOARCH=amd64 go build</code>，编译目标平台的操作系统上运行的二进制文件。</li>
</ul>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">go</span> install     compile and install packages and dependencies</code></pre>
<ul>
<li><p>也是编译，与build最大的区别是编译后会将输出文件打包成库放在pkg下</p>
</li>
<li><p>常用于本地打包编译的命令：go install</p>
</li>
</ul>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">go</span> get        download and install packages and dependencies</code></pre>
<ul>
<li>用于获取go的第三方包，通常会默认从git repo 上pull 最新的版本</li>
<li>常用命令如： <code>go get -u github.com/go-sql-driver/mysql</code>（从github上获取mysql的driver并安装至本地，-u 表示下载最新的包。）</li>
</ul>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">go</span> fmt         gofmt <span class="token punctuation">(</span>reformat<span class="token punctuation">)</span> <span class="token keyword">package</span> sources</code></pre>
<ul>
<li>类似于C中的lint，统一代码风格和排版</li>
<li>常用命令如：<code>go fmt</code></li>
</ul>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">go</span> test          test packages</code></pre>
<ul>
<li>运行当前包目录下的tests</li>
<li>常用命令如：<code>go test</code>或<code>go test -v</code>后面一个命令打印出所有信息</li>
</ul>
<h2 id="Golang的test"><a href="#Golang的test" class="headerlink" title="Golang的test"></a>Golang的test</h2><ul>
<li><emp>Go的test一般以XXX_test.go为文件名</emp>
</li>
<li><p>XXX的部分一般为XXX_test.go所要测试的代码文件名。注：Go并没有要求XXX的部分必须是要测试的文件名。</p>
</li>
</ul>
<p>文件main.go</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">//main.go</span>
<span class="token keyword">package</span> main
<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">"io"</span>
    <span class="token string">"net/http"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">&#123;</span>
    res <span class="token operator">:=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> <span class="token number">20</span> <span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">&#123;</span>
        res <span class="token operator">+=</span> i
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">firstPage</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span>r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    io<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">"&lt;h1>Hello,this is my fisrt page!&lt;/h1>"</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> main <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span>firstPage<span class="token punctuation">)</span>
    http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token string">":8000"</span><span class="token punctuation">,</span><span class="token boolean">nil</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

</code></pre>
<p>输出结果：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/sailaoda/sai_img//img/3/image-20210915113343606.png" alt="程序输出结果"></p>
<p>文件测试：my_test.go（注意文件名格式 XXXtest.go）</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"testing"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestPrintlto20</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	res <span class="token operator">:=</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hey"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">210</span><span class="token punctuation">&#123;</span>
		t<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">"Wrong result of Printlto20"</span><span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/sailaoda/sai_img//img/3/image-20210915120054392.png" alt="测试结果"></p>
<h1 id="Test的写法"><a href="#Test的写法" class="headerlink" title="Test的写法"></a>Test的写法</h1><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"testing"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestPrint</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    res <span class="token operator">:=</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">210</span> <span class="token punctuation">&#123;</span>
        t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Return value not valid"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
<ul>
<li>每一个test文件必须import 一个testing，出现问题可以打印错误等</li>
<li>test文件下的每一个test case均必须以Test开头并且符合TestXxx形式，否则go test会直接跳过测试不执行。  如 func TestPrint</li>
</ul>
<h3 id="具体细节"><a href="#具体细节" class="headerlink" title="具体细节"></a>具体细节</h3><ul>
<li>test case 的入参为 t <em>testing.T 或 b </em>testing.B (b测试信息)</li>
<li>t.Errorf为打印错误信息，并且当前test case 会被跳过</li>
<li>t.SkipNow()为跳过当前test，并且直接按PASS处理下一个test。必须写在第一行。</li>
</ul>
<p>第二点：改成200时的报错信息</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"testing"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestPrintlto20</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//t.SkipNow()</span>
	res <span class="token operator">:=</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hey"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">&#123;</span>
		t<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">"Wrong result of Printlto20"</span><span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/sailaoda/sai_img//img/3/image-20210915131056792.png" alt="报错信息"></p>
<p>第三点：在第一行加上t.SkipNow()后，会跳过当前test，也会显示PASS</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/sailaoda/sai_img//img/3/image-20210915131350235.png" alt="Skip"></p>
<p>测试被忽略：1，已通过：0</p>
<h2 id="Test注意要点"><a href="#Test注意要点" class="headerlink" title="Test注意要点"></a>Test注意要点</h2><ul>
<li><p>Go的test不会保证多个TestXxx是顺序执行，但是通常会按顺序执行。</p>
</li>
<li><p>使用t.Run 来执行subtests可以做到控制test输出以及test的顺序</p>
</li>
</ul>
<p>例如</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main 
<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">"testing"</span>
    <span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestPrint</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"a1"</span><span class="token punctuation">,</span><span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a1"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"a2"</span><span class="token punctuation">,</span><span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a2"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"a3"</span><span class="token punctuation">,</span><span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a3"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>
<ul>
<li>可能在做test之前要做一些初始化的东西</li>
<li>使用TestMain 作为初始化test，并且使用m.Run() 来调用其他tests可以完成一些需要初始化操作的testing，比如数据库连接，文件打开，REST服务登录等。</li>
</ul>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">TestMain</span><span class="token punctuation">(</span>m <span class="token operator">*</span>testing<span class="token punctuation">.</span>M<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printkn</span><span class="token punctuation">(</span><span class="token string">"test main first"</span><span class="token punctuation">)</span>
    m<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>
<ul>
<li><emp>如果没有在TestMain中调用m.Run则除了TestMain意外的其他tests都不会被执行。</emp>
</li>
</ul>
<p>例如：</p>
<h3 id="subtests测试实例"><a href="#subtests测试实例" class="headerlink" title="subtests测试实例"></a>subtests测试实例</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main 
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"testing"</span>
    <span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">testPrint</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">//一般情况下大小写区分开，作为子test</span>
    res <span class="token operator">:=</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hey"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">210</span> <span class="token punctuation">&#123;</span>
        t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Wrong result of Printlto20"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">testPrint2</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    res <span class="token operator">:=</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    res <span class="token operator">++</span>
    <span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">211</span> <span class="token punctuation">&#123;</span>
        t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Test Print2 failed"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">TestAll</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"TestPrint"</span><span class="token punctuation">,</span>testPrint<span class="token punctuation">)</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"TestPrint2"</span><span class="token punctuation">,</span>testPrint2<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
</code></pre>
<p>测试结果：</p>
<pre class="language-none"><code class="language-none">&#x3D;&#x3D;&#x3D; RUN   TestPrint
hey
--- PASS: TestPrint (0.00s)
&#x3D;&#x3D;&#x3D; RUN   TestPrint2
--- PASS: TestPrint2 (0.00s)
&#x3D;&#x3D;&#x3D; RUN   TestAll
&#x3D;&#x3D;&#x3D; RUN   TestAll&#x2F;TestPrint
hey
&#x3D;&#x3D;&#x3D; RUN   TestAll&#x2F;TestPrint2
--- PASS: TestAll (0.00s)
    --- PASS: TestAll&#x2F;TestPrint (0.00s)
    --- PASS: TestAll&#x2F;TestPrint2 (0.00s)
PASS
ok  	webserver	5.658s

进程 已完成，退出代码为 0</code></pre>
<p>子test小写后的输出结果：</p>
<pre class="language-none"><code class="language-none">&#x3D;&#x3D;&#x3D; RUN   TestAll
&#x3D;&#x3D;&#x3D; RUN   TestAll&#x2F;TestPrint
hey
&#x3D;&#x3D;&#x3D; RUN   TestAll&#x2F;TestPrint2
--- PASS: TestAll (0.00s)
    --- PASS: TestAll&#x2F;TestPrint (0.00s)
    --- PASS: TestAll&#x2F;TestPrint2 (0.00s)
PASS
ok  	webserver	5.576s

进程 已完成，退出代码为 0</code></pre>
<h3 id="TestMain测试实例"><a href="#TestMain测试实例" class="headerlink" title="TestMain测试实例"></a>TestMain测试实例</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main 
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"testing"</span>
    <span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">testPrint</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">//一般情况下大小写区分开，作为子test</span>
    res <span class="token operator">:=</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hey"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">210</span> <span class="token punctuation">&#123;</span>
        t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Wrong result of Printlto20"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">testPrint2</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    res <span class="token operator">:=</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    res <span class="token operator">++</span>
    <span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">211</span> <span class="token punctuation">&#123;</span>
        t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Test Print2 failed"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">TestAll</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"TestPrint"</span><span class="token punctuation">,</span>testPrint<span class="token punctuation">)</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"TestPrint2"</span><span class="token punctuation">,</span>testPrint2<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">TestMain</span><span class="token punctuation">(</span>m <span class="token operator">*</span>testing<span class="token punctuation">.</span>M<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Tests begins..... "</span><span class="token punctuation">)</span>
    m<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>测试结果：</p>
<pre class="language-none"><code class="language-none">Tests begins..... 
&#x3D;&#x3D;&#x3D; RUN   TestPrintlto20
--- SKIP: TestPrintlto20 (0.00s)

测试已忽略.
&#x3D;&#x3D;&#x3D; RUN   TestAll
&#x3D;&#x3D;&#x3D; RUN   TestAll&#x2F;TestPrint
hey
&#x3D;&#x3D;&#x3D; RUN   TestAll&#x2F;TestPrint2
--- PASS: TestAll (0.00s)
    --- PASS: TestAll&#x2F;TestPrint (0.00s)
    --- PASS: TestAll&#x2F;TestPrint2 (0.00s)
PASS
ok  	webserver	4.981s

进程 已完成，退出代码为 0</code></pre>
<p>如果把m.Run() 注释掉，则只会执行TestMain()函数的内容。</p>
<h1 id="Test之benchmark"><a href="#Test之benchmark" class="headerlink" title="Test之benchmark"></a>Test之benchmark</h1><ul>
<li>benchmark函数一般以Benchmark开头</li>
<li>benchmark 的case 一般会跑b.N次，而且每次执行都会如此</li>
<li>在执行过程中会根据实际case的执行时间是否稳定会增加b.N的次数以达到稳态</li>
</ul>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main 
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"testing"</span>
    <span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">testPrint</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">//一般情况下大小写区分开，作为子test</span>
    res <span class="token operator">:=</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hey"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">210</span> <span class="token punctuation">&#123;</span>
        t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Wrong result of Printlto20"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">testPrint2</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    res <span class="token operator">:=</span> <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    res <span class="token operator">++</span>
    <span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">211</span> <span class="token punctuation">&#123;</span>
        t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Test Print2 failed"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">TestAll</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"TestPrint"</span><span class="token punctuation">,</span>testPrint<span class="token punctuation">)</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"TestPrint2"</span><span class="token punctuation">,</span>testPrint2<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">TestMain</span><span class="token punctuation">(</span>m <span class="token operator">*</span>testing<span class="token punctuation">.</span>M<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Tests begins..... "</span><span class="token punctuation">)</span>
    m<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">BenchmarkAll</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token number">0</span> <span class="token punctuation">;</span> n <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N <span class="token punctuation">;</span> n <span class="token operator">++</span> <span class="token punctuation">&#123;</span>         <span class="token comment">//寻找函数最稳定的时候，得出最稳定的次数和每次跑的时间</span>
        <span class="token function">Printlto20</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>单独运行BenchmarkAll()  </p>
<p><code>go test -bench=.</code></p>
<pre class="language-none"><code class="language-none">Tests begins..... 
goos: windows
goarch: amd64
pkg: webserver
cpu: Intel(R) Core(TM) i7-1065G7 CPU @ 1.30GHz
BenchmarkAll
BenchmarkAll-8   	162938895	         7.531 ns&#x2F;op
PASS</code></pre>
<p>一共跑了162938895次，每次平均耗时7.531 ns/op。</p>
<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><ol>
<li><p>Benchmark首字母大写</p>
</li>
<li><p>Benchmark同样也是普通的testcase之一，也会受TestMain限制。</p>
</li>
<li><p>千万注意保证被测函数总能在一定时间达到稳态。</p>
</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">hackerwu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://hackerwu.cn/2021/09/15/go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E6%B5%81%E5%AA%92%E4%BD%93%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E7%AC%94%E8%AE%B02%EF%BC%9A%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90%E4%BA%86%E8%A7%A3golang%E5%B7%A5%E5%85%B7%E9%93%BE/">http://hackerwu.cn/2021/09/15/go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E6%B5%81%E5%AA%92%E4%BD%93%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E7%AC%94%E8%AE%B02%EF%BC%9A%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90%E4%BA%86%E8%A7%A3golang%E5%B7%A5%E5%85%B7%E9%93%BE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://hackerwu.cn" target="_blank">赛 の 任意门</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Golang%E5%AE%9E%E6%88%98/">Golang实战</a></div><div class="post_share"><div class="social-share" data-image="/img/cover/goliu.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/donate/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/donate/wechat.jpg" alt="微信金库"/></a><div class="post-qr-code-desc">微信金库</div></li><li class="reward-item"><a href="/img/donate/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/donate/alipay.jpg" alt="支付宝钱庄"/></a><div class="post-qr-code-desc">支付宝钱庄</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/09/14/go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E6%B5%81%E5%AA%92%E4%BD%93%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E7%AC%94%E8%AE%B01%EF%BC%9A%E8%A6%81%E7%82%B9%E4%BB%8B%E7%BB%8D/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/goliu.jpg" onerror="onerror=null;src='/img/error.gif'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Go语言实战流媒体视频网站笔记1：要点介绍</div></div></a></div><div class="next-post pull-right"><a href="/2021/09/16/go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E6%B5%81%E5%AA%92%E4%BD%93%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E7%AC%94%E8%AE%B03%EF%BC%9A%E6%B5%81%E5%AA%92%E4%BD%93%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E4%BB%A5%E5%8F%8AAPI%E6%A8%A1%E5%9D%97%E7%9A%84%E5%AE%9E%E7%8E%B01/"><img class="next-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/goliu.jpg" onerror="onerror=null;src='/img/error.gif'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Go语言实战流媒体视频网站笔记3：流媒体网站架构以及API模块的实现1</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/09/14/go语言实战流媒体视频网站笔记1：要点介绍/" title="Go语言实战流媒体视频网站笔记1：要点介绍"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/goliu.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-14</div><div class="title">Go语言实战流媒体视频网站笔记1：要点介绍</div></div></a></div><div><a href="/2021/09/16/go语言实战流媒体视频网站笔记3：流媒体网站架构以及API模块的实现1/" title="Go语言实战流媒体视频网站笔记3：流媒体网站架构以及API模块的实现1"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/goliu.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-16</div><div class="title">Go语言实战流媒体视频网站笔记3：流媒体网站架构以及API模块的实现1</div></div></a></div><div><a href="/2021/09/19/go语言实战流媒体视频网站笔记4：流媒体网站架构以及API模块的实现2/" title="Go语言实战流媒体视频网站笔记4：流媒体网站架构以及API模块的实现2"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/goliu.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-19</div><div class="title">Go语言实战流媒体视频网站笔记4：流媒体网站架构以及API模块的实现2</div></div></a></div><div><a href="/2021/09/20/Golang实战流媒体视频网站笔记6：API之http-handler层/" title="Golang实战流媒体视频网站笔记6：API之http handler层"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/goliu.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-20</div><div class="title">Golang实战流媒体视频网站笔记6：API之http handler层</div></div></a></div><div><a href="/2021/09/20/Golang实战流媒体视频网站笔记5：流媒体网站架构以及API模块的实现3/" title="Golang实战流媒体视频网站笔记5：流媒体网站架构以及API模块的实现3"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/goliu.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-20</div><div class="title">Golang实战流媒体视频网站笔记5：流媒体网站架构以及API模块的实现3</div></div></a></div><div><a href="/2021/10/04/Golang实战流媒体视频网站笔记7：API之数据库层设计/" title="Golang实战流媒体视频网站笔记7：API之数据库层设计"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/goliu.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-04</div><div class="title">Golang实战流媒体视频网站笔记7：API之数据库层设计</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E4%B8%AAGo%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-number">1.</span> <span class="toc-text">一个Go的例子</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Go%E5%B7%A5%E5%85%B7-%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.</span> <span class="toc-text">Go工具&#x2F;命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Usage%EF%BC%9A"><span class="toc-number">1.1.1.</span> <span class="toc-text">Usage：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-commands-are"><span class="toc-number">1.1.2.</span> <span class="toc-text">The commands are:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang%E7%9A%84test"><span class="toc-number">1.3.</span> <span class="toc-text">Golang的test</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Test%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">Test的写法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E7%BB%86%E8%8A%82"><span class="toc-number">2.0.1.</span> <span class="toc-text">具体细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Test%E6%B3%A8%E6%84%8F%E8%A6%81%E7%82%B9"><span class="toc-number">2.1.</span> <span class="toc-text">Test注意要点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#subtests%E6%B5%8B%E8%AF%95%E5%AE%9E%E4%BE%8B"><span class="toc-number">2.1.1.</span> <span class="toc-text">subtests测试实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TestMain%E6%B5%8B%E8%AF%95%E5%AE%9E%E4%BE%8B"><span class="toc-number">2.1.2.</span> <span class="toc-text">TestMain测试实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Test%E4%B9%8Bbenchmark"><span class="toc-number">3.</span> <span class="toc-text">Test之benchmark</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="toc-number">3.0.1.</span> <span class="toc-text">注意：</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By hackerwu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欢迎客官来到江湖小站！</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'neutral',
      })
      true && mermaid.init()
    })
  }
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'rJxKwWVsRPGJAuJwGPrOc9s7-gzGzoHsz',
      appKey: 'JEiKrmJvInDI0vxeyvPcDLvn',
      placeholder: '这位公子/姑娘有什么要对在下说的吗？',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: 'https://hackerwu.cn',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '38e76c2916fc41fe88f7',
      clientSecret: '1c64c79be0bc590d3a5e52c5d6f11abf2765b36e',
      repo: 'sailaoda.github.io',
      owner: 'sailaoda',
      admin: ['sailaoda'],
      id: 'c6f3e04d7f847167218d3c775ff9f264',
      language: 'zh-CN',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    },false))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Valine' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script src="/js/randombg.js"></script><script async src="/js/diytitle.js"></script><script src="/js/cursor.js"></scropt><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="true" data-text="吃饭,睡觉,学技术,Golang,搞算法" data-fontsize="15px" data-random="true" async="async"></script><script src="//code.tidio.co/cnbgzsgyy85dcz1vwlr5qo0sy2ijojti.js" async="async"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/shuoshuo/"]):not([href="/about/"]):not([href="pangu"]):not([href="Gitalk"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-5EKRNM989R', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
                        function butterfly_swiper_injector_config(){
                          var parent_div_git = document.getElementById('recent-posts');
                          var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/12/15/Rust基础要点汇总/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/rust.png" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-12-15</span><a class="blog-slider__title" href="2022/12/15/Rust基础要点汇总/" alt="">Rust基础要点汇总</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2022/12/15/Rust基础要点汇总/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/09/22/Dataway-接口-DataQL语言-开发记录/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/code.jpg" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-09-22</span><a class="blog-slider__title" href="2022/09/22/Dataway-接口-DataQL语言-开发记录/" alt="">Dataway 接口(DataQL语言)开发记录</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2022/09/22/Dataway-接口-DataQL语言-开发记录/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/09/22/1-Golang-面试题整理/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/mianshi.png" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-09-22</span><a class="blog-slider__title" href="2021/09/22/1-Golang-面试题整理/" alt="">Golang 面试题整理</a><div class="blog-slider__text">Golang面试题整理</div><a class="blog-slider__button" href="2021/09/22/1-Golang-面试题整理/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/09/15/go语言实战流媒体视频网站笔记2：一个例子了解golang工具链/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/goliu.jpg" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-09-15</span><a class="blog-slider__title" href="2021/09/15/go语言实战流媒体视频网站笔记2：一个例子了解golang工具链/" alt="">Go语言实战流媒体视频网站笔记2：一个例子了解Golang工具链</a><div class="blog-slider__text">通过一个简单的webservice具体从Golang的工具链，到test，全面介绍Golang在工程项目里需要掌握的知识点。</div><a class="blog-slider__button" href="2021/09/15/go语言实战流媒体视频网站笔记2：一个例子了解golang工具链/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/08/20/安装nvm后无npm导致无法安装gitbook解决办法/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/3.png" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-08-20</span><a class="blog-slider__title" href="2021/08/20/安装nvm后无npm导致无法安装gitbook解决办法/" alt="">安装nvm后无npm导致无法安装GitBook解决办法</a><div class="blog-slider__text">nvm里面node版本导致的一系列问题，基本上都在这里了。</div><a class="blog-slider__button" href="2021/08/20/安装nvm后无npm导致无法安装gitbook解决办法/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/10/07/1-启动LeetCode刷题计划/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/cover/leetcode.png" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-10-07</span><a class="blog-slider__title" href="2021/10/07/1-启动LeetCode刷题计划/" alt="">LeetCode刷题剑指Offer</a><div class="blog-slider__text">剑指Offer计划</div><a class="blog-slider__button" href="2021/10/07/1-启动LeetCode刷题计划/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/09/13/go语言学习笔记9：面向对象-上）/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="img/cover/go.jpg" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-09-13</span><a class="blog-slider__title" href="2021/09/13/go语言学习笔记9：面向对象-上）/" alt="">Golang学习笔记9：面向对象(上）</a><div class="blog-slider__text">Golang的面向对象特性</div><a class="blog-slider__button" href="2021/09/13/go语言学习笔记9：面向对象-上）/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
                          console.log('已挂载butterfly_swiper')
                          // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                          parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
                          }
                        if( document.getElementById('recent-posts') && (location.pathname ==='all'|| 'all' ==='all')){
                        butterfly_swiper_injector_config()
                        }
                      </script><script defer src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.1.6/js/swiper.min.js"></script><script defer data-pjax src="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="https://at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/01/assets/haru01.model.json"},"display":{"superSample":2,"position":"left","width":200,"height":400,"hOffset":0,"vOffset":0},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2,"opacity":0.95},"dialog":{"enable":false,"hitokoto":true},"log":false});</script></body></html>